<!-- 2. 进度停滞监控卡片 (合并了原来的14天和30天) -->

<div class="card">
    <div class="card-body">
        <!-- 头部：样式对齐 -->
        <div class="d-flex align-items-center mb-2">
            <div class="subheader">进度预警</div>
            <div class="ms-auto lh-1 text-muted">
                <!-- 【修复】使用 Tabler Icon 替换 SVG -->
                <span class="text-orange d-inline-flex align-items-center lh-1">
                    <i class="ti ti-alert-triangle icon-inline me-1"></i>
                    需关注
                </span>
            </div>
        </div>

        <!-- 大数字：直接使用后端计算好的总数 -->
        <div class="d-flex align-items-baseline">
            <div class="h1 mb-3 me-2">
                {{ stats.total_stagnant_count }}
            </div>
            <div class="me-auto text-muted">
                个项目停滞
            </div>
        </div>

        <!-- 进度条组 -->

        <!-- 1. 严重停滞 (>30天) - 红色 - 优先级最高放在最上面 -->
        <div class="mb-2">
            <div class="d-flex mb-1">
                <div class="text-muted">严重停滞 (>30天)</div>
                <div class="ms-auto fw-bold">{{ stats.stagnant_30d|length }}</div>
            </div>
            <div class="progress progress-sm">
                <!-- 分母使用 total_active，展示占活跃项目的比例，更有意义 -->
                <div class="progress-bar bg-red" style="width: {% widthratio stats.stagnant_30d|length stats.total_active 100 %}%"></div>
            </div>
        </div>

        <!-- 2. 中度停滞 (>14天) - 黄色 -->
        <div class="mb-0">
            <div class="d-flex mb-1">
                <div class="text-muted">中度停滞 (>14天)</div>
                <div class="ms-auto fw-bold">{{ stats.stagnant_14d|length }}</div>
            </div>
            <div class="progress progress-sm">
                <div class="progress-bar bg-yellow" style="width: {% widthratio stats.stagnant_14d|length stats.total_active 100 %}%"></div>
            </div>
        </div>

    </div>
</div>
